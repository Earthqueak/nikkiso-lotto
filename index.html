<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏á‡∏≤‡∏ô</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg,#0d6efd,#4dabf7);
  padding:20px;
}
.container {
  max-width:400px;
  margin:auto;
  background:#fff;
  padding:20px;
  border-radius:14px;
}
.logo {
  text-align:center;
  margin-bottom:10px;
}
.logo img {
  max-width:260px;
}
h2 {
  text-align:center;
  color:#0d6efd;
}
input,button {
  width:90%;
  padding:12px;
  margin:10px auto 0;
  display:block;
}
button {
  background:#0d6efd;
  color:#fff;
  border:none;
  font-weight:bold;
}
.hidden { display:none; }
#queue {
  font-size:48px;
  color:#0d6efd;
  font-weight:bold;
}
</style>
</head>

<body>
<div class="container">

<div class="logo">
  <!-- üî¥ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô URL ‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏à‡∏£‡∏¥‡∏á -->
  <img src="https://drive.google.com/file/d/1wuwMwBPd55xbYAmAJBbGCiSnvxHteTWN/view?usp=sharing">
</div>

<h2>‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏á‡∏≤‡∏ô</h2>

<div id="form">
  <input id="name" placeholder="‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏•">
  <input id="phone" placeholder="‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£">
  <input id="hospital" placeholder="‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•">
  <button onclick="register()">‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</button>
</div>

<div id="result" class="hidden">
  <p>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
  <div id="queue"></div>
  <img id="qr" style="margin-top:15px">
  <button onclick="location.reload()">‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>
</div>

</div>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyQWhQeulnEZgaCkfuqDI2VhsQTG535WRBXyFL1jFe9nEpcObZzI0EWRXq53gaCRLm9rQ/exec";
let sending = false;

function register() {
  if (sending) return;
  sending = true;

  const data = {
    fullname: name.value.trim(),
    phone: phone.value.replace(/\D/g,""),
    hospital: hospital.value.trim()
  };

  if (!data.fullname || !data.phone || !data.hospital) {
    alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö");
    sending = false;
    return;
  }

  fetch(SCRIPT_URL, {
    method:"POST",
    body:JSON.stringify(data)
  })
  .then(r => r.json())
  .then(d => {
    if (d.status !== "success") throw d;
    form.classList.add("hidden");
    result.classList.remove("hidden");
    queue.innerText = d.number;
    qr.src =
      "https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=" +
      encodeURIComponent("Queue: "+d.number);
  })
  .catch(() => {
    alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î");
    sending = false;
  });
}
</script>
</body>
</html>
